---
title: 面试经验：集度
date: 2023-10-17 15:21:47
categories:
- 面经
tags:
- 面经
---

2023年10月17日集度一面

面试整体面试回答情况一般，大概率是凉经。感觉要把操作系统这一块内容给吃透了，这里简单记录一下

## 自我介绍

简单的自我介绍

## 问技术栈

因为武汉的岗位是java的，所以面试官想推我去北京，大概问了我一下，然后就是专业问题，因为跨考生，所以问一下基础问题。

## 八股

### 进程与线程的区别？

#### 根本区别

- 进程是操作系统资源分配的基本单位
- 线程是处理器任务调度和执行的基本单位

#### 资源开销

- 进程：每个进程都有独立的代码和数据空间，程序之间的切换会有较大的开销
- 线程：线程可以看作是轻量级线程，共享一个进程的代码和数据空间，每个线程都有自己独立的运行栈和程序计数器，线程之前切换的开销小

#### 内存分配

- 进程：进程会单独的分配资源，且每个进程之间是相互独立的
- 线程：同一个进程中的线程是共享进程的地址空间和资源

#### 影响关系

- 进程：一般情况下，进程崩溃不会影响其他进程
- 线程：线程崩溃往往会导致整个进程崩溃

#### 执行过程

- 进程：每个进程有独立的程序运行入口、序列和出口
- 线程：线程不能独立运行，必须依赖于进程当中

### 进程之间如何通信？

- 管道
- 消息队列
- 共享内存
- 信号量
- 信号
- Socket

### 管道是怎么实现的？

对于匿名管道，它的通信范围是存在父子关系的进程。因为管道没有实体，也就是没有管道文件，只能通过 fork 来复制父进程 fd 文件描述符，来达到通信的目的。对于命名管道，它可以在不相关的进程间也能相互通信。因为命令管道，提前创建了一个类型为管道的设备文件，在进程里只要使用这个设备文件，就可以相互通信。不管是匿名管道还是命名管道，进程写入的数据都是缓存在内核中，另一个进程读取数据时候自然也是从内核中获取，同时通信数据都遵循先进先出原则，不支持 lseek 之类的文件定位操作。

### 进程之间是怎么切换的？

首先最重要的是上下文切换，对于CPU上下文切换的可以分成：进程上下文切换、线程上下文切换、中断上下文切换

- 进程上下文切换：进程是由内核调度的，所以每次调度都会陷入内核进行调度，切换的东西也比较多：虚拟内存、栈、全局变量等用户空间的资源，还包括内核堆栈、寄存器等内核空间的资源

![进程的切换](https://s2.loli.net/2023/10/17/ESTlyCXd4h3MaPQ.png)

### 操作系统中内存管理？

首先操作系统为了防止进程直接对物理地址的修改，所以加上一层虚拟内存作为物理内存的影响，这样让操作系统为每个进程分配独立的一套虚拟地址。最终虚拟内存如何落到物理地址中由操作系统说的算

为了增加这一层，操作系统需要提供一种机制，将不同进程的虚拟地址和不同内存的物理地址映射起来。如何实现这种映射呢？

进程持有的虚拟地址会通过MMU的映射关系，来转换成物理地址，然后再通过物理地址访问内存，如下图所示：

![虚拟地址映射到物理地址](https://s2.loli.net/2023/10/17/uMxQpr9fIaoGADS.png)

那么问题就来了，操作系统是如何管理虚拟地址与物理地址之间的关系的呢？

目前有两种解决方法

- 内存分段
- 内存分页

### 段和页的区别？

#### 内存分段

内存分段是较早提出的一种映射方法。其主要的观点来自于开发过程中，程序是有若干个逻辑分段组成的，如可由代码分段、数据分段、栈段、堆段组成。不同的段是有不同的属性的，所以就用分段的形式把这些段分离出来。

- 分段机制下的虚拟地址和物理地址是如何映射的？

分段机制下的虚拟地址主要有两个部分组成，**段选择因子**和**段内偏移量**

![段地址映射](https://s2.loli.net/2023/10/17/munwgZMfU5idCIB.png)

通过段选择因子去找段表，通过段内偏移量去查段内的物理地址

虽然解决了程序本身不关心具体的物理内存地址的问题，但是它也有些不足之处：

- 第一个就是内存碎片的问题
- 第二个就是内存交换的效率低的问题

内存碎片是如何出现的呢？

拿小林coding中的一个例子来举

![内存碎片产生](https://s2.loli.net/2023/10/17/KbaDCnB5Xdzxqcg.png)

因为物理内存的是分散的，所以导致新的程序是无法分配大于128M的空间

内存分段因为是按需分配的，所以会出现段外碎片，但是不会出现段内碎片。为了解决内存碎片的问题于是推出了**内存交换**技术

对于内存交换技术实际可以理解为内存的清理，需要将前面有碎片的段内存转移到硬盘上去，然后再依次紧挨的排到后面，这样就可以空缺出一个合适的空间

但是我们可以看出来，这种分段模式必定会导致外部内存碎片的频繁出现，所以需要频繁的执行swap()方法去清除这些内存碎片，这时也会频繁出现大量的复制，对CPU资源产生了大量的消耗

所以，如果内存交换的时候，交换的是一个占内存空间很大的程序，这样整个机器都会显得卡顿。

为了解决内存分段的「外部内存碎片和内存交换效率低」的问题，就出现了内存分页。

#### 内存分页

分页是把整个虚拟和物理内存空间切成一段段固定尺寸的大小。这样一个连续并且尺寸固定的内存空间，我们叫页（Page）。在 Linux 下，每一页的大小为 4KB

虚拟地址与物理地址之间通过页表来映射

![分页映射](https://s2.loli.net/2023/10/17/yzTCIbvGEhi16B8.png)

页表是存储在内存里的，内存管理单元 （MMU）就做将虚拟内存地址转换成物理地址的工作。

而当进程访问的虚拟地址在页表中查不到时，系统会产生一个缺页异常，进入系统内核空间分配物理内存、更新进程页表，最后再返回用户空间，恢复进程的运行。

### 什么是栈，什么是堆？

### 什么是栈，什么是队列？

### 在操作系统中哪些有体现？

### 七层网络结构

### TCP在那一层？

### TCP 和 UDP的区别？

### Mysql有什么索引？

### 索引的结构是什么？

### 事务隔离级别有哪些？

### 四种隔离级别有什么区别？

### undo log 和 redo log的区别？

## 挖实习

### 在石墨大概做了什么，简单讲一下

### 这期间有没有遇到什么问题？

### 这个问题是怎么出现的？

### 有没有影响到线上？

### 有什么收获？

### 具体学到了什么？

## 手撕

[leetcode 69.x的平方根](https://leetcode.cn/problems/sqrtx/)

## 有什么兴趣爱好

## 反问

## 总结

面的不是太好，操作系统部分面的稀烂，感觉大概率是凉了，之后要好好看看相关的知识点了